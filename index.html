<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tfstats — Terraform Registry Stats</title>
<meta name="description" content="Daily charts for Terraform Registry providers: period downloads (24h/7d/30d/365d), rank changes, and searchable catalog. Unofficial.">
<link rel="stylesheet" href="./styles.css"/>
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
<header class="header">
  <div class="brand">
    <div class="dot"></div>
    <div>
      <div class="title">tfstats — Terraform Registry</div>
      <div class="subtitle">Daily snapshots • Period leaders • Rank movers • Unofficial</div>
    </div>
  </div>
</header>

<main class="main">
  <!-- KPI STRIP -->
  <section class="kpi-grid">
    <div class="kpi"><div class="kpi-title">Total Providers</div><div class="kpi-value" id="kpiProviders">—</div><div class="kpi-sub" id="kpiDate">—</div></div>
    <div class="kpi"><div class="kpi-title">Total Downloads</div><div class="kpi-value" id="kpiDownloads">—</div><div class="kpi-sub">cumulative</div></div>
    <div class="kpi"><div class="kpi-title">Top Movers</div><div class="kpi-value" id="kpiMovers">—</div><div class="kpi-sub" id="kpiWindow">—</div></div>
    <div class="kpi"><div class="kpi-title">Official / Partner / Community</div><div class="kpi-value" id="kpiTierSplit">—</div><div class="kpi-sub">counts</div></div>
  </section>

  <!-- CONTROLS -->
  <section class="card">
    <div class="toolbar">
      <div>
        <strong>Window:</strong>
        <select id="windowSelect">
          <option value="last_24h">Last 24h</option>
          <option value="last_7d">Last 7 days</option>
          <option value="last_30d">Last 30 days</option>
          <option value="last_365d">Last 365 days</option>
        </select>
        <span class="tag" id="refDateTag"></span>
      </div>
      <div><input id="searchBox" type="search" placeholder="Search provider (namespace/name)…"/></div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Top by period <span class="tag" id="topCountTag"></span></h2>
        <div id="chartTop" class="chart"></div>
      </div>
      <div class="card">
        <h2>Rank movers (up/down)</h2>
        <div id="chartMovers" class="chart"></div>
      </div>
    </div>
  </section>

  <!-- TABLE -->
  <section class="card">
    <h2>Provider catalog <span class="tag" id="catalogCountTag"></span></h2>
    <div class="table-wrap">
      <table id="providersTable">
        <thead>
          <tr>
            <th>#</th><th>Provider</th><th>Tier</th><th>Total downloads</th>
            <th id="thPeriod">Period downloads</th><th>Rank Δ</th><th>Source</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <footer>
    Data: Terraform Registry (HashiCorp). Charts: Apache ECharts. Unofficial. HashiCorp® and Terraform® are trademarks of HashiCorp, Inc.
  </footer>
</main>

<!-- PROVIDER DETAIL MODAL -->
<div id="modal" class="modal hidden" aria-modal="true" role="dialog">
  <div class="modal-dialog">
    <button class="modal-close" id="modalClose" aria-label="Close">×</button>
    <div class="modal-header">
      <div class="pill" id="modalTier">—</div>
      <h3 id="modalTitle">—</h3>
      <a id="modalRegistry" target="_blank" rel="noopener">Registry</a>
      <a id="modalSource" target="_blank" rel="noopener">Source</a>
    </div>
    <div class="modal-kpis">
      <div><div class="k">Total Downloads</div><div class="v" id="mTotal">—</div></div>
      <div><div class="k">Rank (now)</div><div class="v" id="mRankNow">—</div></div>
      <div><div class="k">Rank Δ</div><div class="v" id="mRankDelta">—</div></div>
      <div><div class="k">Period</div><div class="v" id="mPeriod">—</div></div>
    </div>
    <div class="modal-chart" id="modalChart"></div>
    <p class="modal-desc" id="modalDesc">—</p>
  </div>
</div>

<script src="./app.js"></script>
</body>
</html>
